---
import Pixels from "../components/Pixels.astro";

const { title, breadcrumbs = null, faqs = null } = Astro.props;
const SITE_NAME = "Servry";
const SITE_URL = "https://servry.com"; // placeholder for now
const SITE_DESCRIPTION =
  "Servry is a form-first GEO-SEO platform connecting consumers with national providers for replacement and life-stage services.";
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>{title ? `${title} | ${SITE_NAME}` : SITE_NAME}</title>
    <meta name="description" content={SITE_DESCRIPTION} />

    <!-- GOOGLE TAG (GA4) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZMDPYFW90C"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-ZMDPYFW90C');
    </script>

    <!-- WEBSITE SCHEMA -->
    <script type="application/ld+json">
      {JSON.stringify({
        "@context": "https://schema.org",
        "@type": "WebSite",
        name: SITE_NAME,
        url: SITE_URL,
        description: SITE_DESCRIPTION,
        publisher: {
          "@type": "Organization",
          name: SITE_NAME,
          url: SITE_URL,
        },
      })}
    </script>

    <!-- ORGANIZATION SCHEMA (NO PHONE, NO LOCAL CLAIMS) -->
    <script type="application/ld+json">
      {JSON.stringify({
        "@context": "https://schema.org",
        "@type": "Organization",
        name: SITE_NAME,
        url: SITE_URL,
        description:
          "Servry operates as an informational and referral platform connecting consumers with national service providers through online request forms.",
      })}
    </script>

    <!-- OPTIONAL FAQ SCHEMA -->
    {faqs && (
      <script
        type="application/ld+json"
        set:html={JSON.stringify({
          "@context": "https://schema.org",
          "@type": "FAQPage",
          mainEntity: faqs.map((f) => ({
            "@type": "Question",
            name: f.question,
            acceptedAnswer: {
              "@type": "Answer",
              text: f.answer,
            },
          })),
        })}
      />
    )}

    <!-- OPTIONAL BREADCRUMB SCHEMA -->
    {breadcrumbs && (
      <script
        type="application/ld+json"
        set:html={JSON.stringify({
          "@context": "https://schema.org",
          "@type": "BreadcrumbList",
          itemListElement: breadcrumbs.map((item, i) => ({
            "@type": "ListItem",
            position: i + 1,
            name: item.name,
            item: item.url,
          })),
        })}
      />
    )}

    <!-- PIXELS (OFF BY DEFAULT / SAFE) -->
    <Pixels />

    <style>
      body {
        font-family: Arial, Helvetica, sans-serif;
        margin: 0;
        padding: 0;
        line-height: 1.6;
        color: #111;
      }

      main {
        max-width: 900px;
        margin: 40px auto;
        padding: 0 20px;
      }

      footer {
        margin-top: 80px;
        padding: 20px;
        font-size: 14px;
        border-top: 1px solid #eee;
        text-align: center;
      }

      a {
        color: #0b5ed7;
        text-decoration: none;
      }

      a:hover {
        text-decoration: underline;
      }
    </style>
  </head>

  <body>
    <main>
      <slot />
    </main>

    <footer>
      <a href="/">Home</a> |
      <a href="/about">About</a> |
      <a href="/contact">Contact</a> |
      <a href="/disclosures">Disclosures</a> |
      <a href="/privacy">Privacy</a> |
      <a href="/terms">Terms</a>
    </footer>
  </body>
</html>